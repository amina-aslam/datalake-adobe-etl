# Use the Node docker container, see https://github.com/nodejs/docker-node
# See example docker file here, see https://nodejs.org/en/docs/guides/nodejs-docker-webapp/
FROM node:carbon

ENV NODE_ENV=$NODE_ENV
ENV LOG_LEVEL=$LOG_LEVEL
ENV POSTGRES_URI=$POSTGRES_URI
ENV SOCIALBAKERS_API_TOKEN=$SOCIALBAKERS_API_TOKEN
ENV SOCIALBAKERS_API_SECRET=$SOCIALBAKERS_API_SECRET

# Set working directory
WORKDIR /usr/src/app

# Bundle app source
COPY . .

# Installs
RUN pipenv shell
RUN pipenv install

# For an API, export the port
#EXPOSE $PORT

#CMD ["yarn", "run", "prod"]
CMD ["node", "index.js"]